{"ast":null,"code":"\"use strict\"; // @ts-nocheck\n\nvar _slicedToArray = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _objectSpread = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _classCallCheck = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _get = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/home/yclnl/yclnl.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setLayoutEncoder = exports.setLayoutDecoder = exports.accountFlagsLayout = exports.orderTypeLayout = exports.sideLayout = exports.VersionedLayout = exports.WideBits = exports.u128 = exports.u64 = exports.publicKeyLayout = exports.zeros = void 0;\n\nvar buffer_layout_1 = require(\"buffer-layout\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar bn_js_1 = __importDefault(require(\"bn.js\"));\n\nvar Zeros = /*#__PURE__*/function (_buffer_layout_1$Blob) {\n  _inherits(Zeros, _buffer_layout_1$Blob);\n\n  var _super = _createSuper(Zeros);\n\n  function Zeros() {\n    _classCallCheck(this, Zeros);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Zeros, [{\n    key: \"decode\",\n    value: function decode(b, offset) {\n      var slice = _get(_getPrototypeOf(Zeros.prototype), \"decode\", this).call(this, b, offset);\n\n      if (!slice.every(function (v) {\n        return v === 0;\n      })) {\n        throw new Error('nonzero padding bytes');\n      }\n\n      return slice;\n    }\n  }]);\n\n  return Zeros;\n}(buffer_layout_1.Blob);\n\nfunction zeros(length) {\n  return new Zeros(length);\n}\n\nexports.zeros = zeros;\n\nvar PublicKeyLayout = /*#__PURE__*/function (_buffer_layout_1$Blob2) {\n  _inherits(PublicKeyLayout, _buffer_layout_1$Blob2);\n\n  var _super2 = _createSuper(PublicKeyLayout);\n\n  function PublicKeyLayout(property) {\n    _classCallCheck(this, PublicKeyLayout);\n\n    return _super2.call(this, 32, property);\n  }\n\n  _createClass(PublicKeyLayout, [{\n    key: \"decode\",\n    value: function decode(b, offset) {\n      return new web3_js_1.PublicKey(_get(_getPrototypeOf(PublicKeyLayout.prototype), \"decode\", this).call(this, b, offset));\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(src, b, offset) {\n      return _get(_getPrototypeOf(PublicKeyLayout.prototype), \"encode\", this).call(this, src.toBuffer(), b, offset);\n    }\n  }]);\n\n  return PublicKeyLayout;\n}(buffer_layout_1.Blob);\n\nfunction publicKeyLayout(property) {\n  return new PublicKeyLayout(property);\n}\n\nexports.publicKeyLayout = publicKeyLayout;\n\nvar BNLayout = /*#__PURE__*/function (_buffer_layout_1$Blob3) {\n  _inherits(BNLayout, _buffer_layout_1$Blob3);\n\n  var _super3 = _createSuper(BNLayout);\n\n  function BNLayout() {\n    _classCallCheck(this, BNLayout);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(BNLayout, [{\n    key: \"decode\",\n    value: function decode(b, offset) {\n      return new bn_js_1.default(_get(_getPrototypeOf(BNLayout.prototype), \"decode\", this).call(this, b, offset), 10, 'le');\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(src, b, offset) {\n      return _get(_getPrototypeOf(BNLayout.prototype), \"encode\", this).call(this, src.toArrayLike(Buffer, 'le', this.span), b, offset);\n    }\n  }]);\n\n  return BNLayout;\n}(buffer_layout_1.Blob);\n\nfunction u64(property) {\n  return new BNLayout(8, property);\n}\n\nexports.u64 = u64;\n\nfunction u128(property) {\n  return new BNLayout(16, property);\n}\n\nexports.u128 = u128;\n\nvar WideBits = /*#__PURE__*/function (_buffer_layout_1$Layo) {\n  _inherits(WideBits, _buffer_layout_1$Layo);\n\n  var _super4 = _createSuper(WideBits);\n\n  function WideBits(property) {\n    var _this;\n\n    _classCallCheck(this, WideBits);\n\n    _this = _super4.call(this, 8, property);\n    _this._lower = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n    _this._upper = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n    return _this;\n  }\n\n  _createClass(WideBits, [{\n    key: \"addBoolean\",\n    value: function addBoolean(property) {\n      if (this._lower.fields.length < 32) {\n        this._lower.addBoolean(property);\n      } else {\n        this._upper.addBoolean(property);\n      }\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(b) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var lowerDecoded = this._lower.decode(b, offset);\n\n      var upperDecoded = this._upper.decode(b, offset + this._lower.span);\n\n      return _objectSpread(_objectSpread({}, lowerDecoded), upperDecoded);\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(src, b) {\n      var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return this._lower.encode(src, b, offset) + this._upper.encode(src, b, offset + this._lower.span);\n    }\n  }]);\n\n  return WideBits;\n}(buffer_layout_1.Layout);\n\nexports.WideBits = WideBits;\n\nvar VersionedLayout = /*#__PURE__*/function (_buffer_layout_1$Layo2) {\n  _inherits(VersionedLayout, _buffer_layout_1$Layo2);\n\n  var _super5 = _createSuper(VersionedLayout);\n\n  function VersionedLayout(version, inner, property) {\n    var _this2;\n\n    _classCallCheck(this, VersionedLayout);\n\n    _this2 = _super5.call(this, inner.span > 0 ? inner.span + 1 : inner.span, property);\n    _this2.version = version;\n    _this2.inner = inner;\n    return _this2;\n  }\n\n  _createClass(VersionedLayout, [{\n    key: \"decode\",\n    value: function decode(b) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      // if (b.readUInt8(offset) !== this._version) {\n      //   throw new Error('invalid version');\n      // }\n      return this.inner.decode(b, offset + 1);\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(src, b) {\n      var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      b.writeUInt8(this.version, offset);\n      return 1 + this.inner.encode(src, b, offset + 1);\n    }\n  }, {\n    key: \"getSpan\",\n    value: function getSpan(b) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return 1 + this.inner.getSpan(b, offset + 1);\n    }\n  }]);\n\n  return VersionedLayout;\n}(buffer_layout_1.Layout);\n\nexports.VersionedLayout = VersionedLayout;\n\nvar EnumLayout = /*#__PURE__*/function (_buffer_layout_1$UInt) {\n  _inherits(EnumLayout, _buffer_layout_1$UInt);\n\n  var _super6 = _createSuper(EnumLayout);\n\n  function EnumLayout(values, span, property) {\n    var _this3;\n\n    _classCallCheck(this, EnumLayout);\n\n    _this3 = _super6.call(this, span, property);\n    _this3.values = values;\n    return _this3;\n  }\n\n  _createClass(EnumLayout, [{\n    key: \"encode\",\n    value: function encode(src, b, offset) {\n      if (this.values[src] !== undefined) {\n        return _get(_getPrototypeOf(EnumLayout.prototype), \"encode\", this).call(this, this.values[src], b, offset);\n      }\n\n      throw new Error('Invalid ' + this.property);\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(b, offset) {\n      var decodedValue = _get(_getPrototypeOf(EnumLayout.prototype), \"decode\", this).call(this, b, offset);\n\n      var entry = Object.entries(this.values).find(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            value = _ref2[1];\n\n        return value === decodedValue;\n      });\n\n      if (entry) {\n        return entry[0];\n      }\n\n      throw new Error('Invalid ' + this.property);\n    }\n  }]);\n\n  return EnumLayout;\n}(buffer_layout_1.UInt);\n\nfunction sideLayout(property) {\n  return new EnumLayout({\n    buy: 0,\n    sell: 1\n  }, 4, property);\n}\n\nexports.sideLayout = sideLayout;\n\nfunction orderTypeLayout(property) {\n  return new EnumLayout({\n    limit: 0,\n    ioc: 1,\n    postOnly: 2\n  }, 4, property);\n}\n\nexports.orderTypeLayout = orderTypeLayout;\nvar ACCOUNT_FLAGS_LAYOUT = new WideBits();\nACCOUNT_FLAGS_LAYOUT.addBoolean('initialized');\nACCOUNT_FLAGS_LAYOUT.addBoolean('market');\nACCOUNT_FLAGS_LAYOUT.addBoolean('openOrders');\nACCOUNT_FLAGS_LAYOUT.addBoolean('requestQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('eventQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('bids');\nACCOUNT_FLAGS_LAYOUT.addBoolean('asks');\n\nfunction accountFlagsLayout() {\n  var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'accountFlags';\n  return ACCOUNT_FLAGS_LAYOUT.replicate(property);\n}\n\nexports.accountFlagsLayout = accountFlagsLayout;\n\nfunction setLayoutDecoder(layout, decoder) {\n  var originalDecode = layout.decode;\n\n  layout.decode = function decode(b) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return decoder(originalDecode.call(this, b, offset));\n  };\n}\n\nexports.setLayoutDecoder = setLayoutDecoder;\n\nfunction setLayoutEncoder(layout, encoder) {\n  var originalEncode = layout.encode;\n\n  layout.encode = function encode(src, b, offset) {\n    return originalEncode.call(this, encoder(src), b, offset);\n  };\n\n  return layout;\n}\n\nexports.setLayoutEncoder = setLayoutEncoder;","map":{"version":3,"sources":["../src/layout.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n// @ts-nocheck\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setLayoutEncoder = exports.setLayoutDecoder = exports.accountFlagsLayout = exports.orderTypeLayout = exports.sideLayout = exports.VersionedLayout = exports.WideBits = exports.u128 = exports.u64 = exports.publicKeyLayout = exports.zeros = void 0;\nconst buffer_layout_1 = require(\"buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nclass Zeros extends buffer_layout_1.Blob {\n    decode(b, offset) {\n        const slice = super.decode(b, offset);\n        if (!slice.every((v) => v === 0)) {\n            throw new Error('nonzero padding bytes');\n        }\n        return slice;\n    }\n}\nfunction zeros(length) {\n    return new Zeros(length);\n}\nexports.zeros = zeros;\nclass PublicKeyLayout extends buffer_layout_1.Blob {\n    constructor(property) {\n        super(32, property);\n    }\n    decode(b, offset) {\n        return new web3_js_1.PublicKey(super.decode(b, offset));\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toBuffer(), b, offset);\n    }\n}\nfunction publicKeyLayout(property) {\n    return new PublicKeyLayout(property);\n}\nexports.publicKeyLayout = publicKeyLayout;\nclass BNLayout extends buffer_layout_1.Blob {\n    decode(b, offset) {\n        return new bn_js_1.default(super.decode(b, offset), 10, 'le');\n    }\n    encode(src, b, offset) {\n        return super.encode(src.toArrayLike(Buffer, 'le', this.span), b, offset);\n    }\n}\nfunction u64(property) {\n    return new BNLayout(8, property);\n}\nexports.u64 = u64;\nfunction u128(property) {\n    return new BNLayout(16, property);\n}\nexports.u128 = u128;\nclass WideBits extends buffer_layout_1.Layout {\n    constructor(property) {\n        super(8, property);\n        this._lower = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n        this._upper = buffer_layout_1.bits(buffer_layout_1.u32(), false);\n    }\n    addBoolean(property) {\n        if (this._lower.fields.length < 32) {\n            this._lower.addBoolean(property);\n        }\n        else {\n            this._upper.addBoolean(property);\n        }\n    }\n    decode(b, offset = 0) {\n        const lowerDecoded = this._lower.decode(b, offset);\n        const upperDecoded = this._upper.decode(b, offset + this._lower.span);\n        return { ...lowerDecoded, ...upperDecoded };\n    }\n    encode(src, b, offset = 0) {\n        return (this._lower.encode(src, b, offset) +\n            this._upper.encode(src, b, offset + this._lower.span));\n    }\n}\nexports.WideBits = WideBits;\nclass VersionedLayout extends buffer_layout_1.Layout {\n    constructor(version, inner, property) {\n        super(inner.span > 0 ? inner.span + 1 : inner.span, property);\n        this.version = version;\n        this.inner = inner;\n    }\n    decode(b, offset = 0) {\n        // if (b.readUInt8(offset) !== this._version) {\n        //   throw new Error('invalid version');\n        // }\n        return this.inner.decode(b, offset + 1);\n    }\n    encode(src, b, offset = 0) {\n        b.writeUInt8(this.version, offset);\n        return 1 + this.inner.encode(src, b, offset + 1);\n    }\n    getSpan(b, offset = 0) {\n        return 1 + this.inner.getSpan(b, offset + 1);\n    }\n}\nexports.VersionedLayout = VersionedLayout;\nclass EnumLayout extends buffer_layout_1.UInt {\n    constructor(values, span, property) {\n        super(span, property);\n        this.values = values;\n    }\n    encode(src, b, offset) {\n        if (this.values[src] !== undefined) {\n            return super.encode(this.values[src], b, offset);\n        }\n        throw new Error('Invalid ' + this.property);\n    }\n    decode(b, offset) {\n        const decodedValue = super.decode(b, offset);\n        const entry = Object.entries(this.values).find(([, value]) => value === decodedValue);\n        if (entry) {\n            return entry[0];\n        }\n        throw new Error('Invalid ' + this.property);\n    }\n}\nfunction sideLayout(property) {\n    return new EnumLayout({ buy: 0, sell: 1 }, 4, property);\n}\nexports.sideLayout = sideLayout;\nfunction orderTypeLayout(property) {\n    return new EnumLayout({ limit: 0, ioc: 1, postOnly: 2 }, 4, property);\n}\nexports.orderTypeLayout = orderTypeLayout;\nconst ACCOUNT_FLAGS_LAYOUT = new WideBits();\nACCOUNT_FLAGS_LAYOUT.addBoolean('initialized');\nACCOUNT_FLAGS_LAYOUT.addBoolean('market');\nACCOUNT_FLAGS_LAYOUT.addBoolean('openOrders');\nACCOUNT_FLAGS_LAYOUT.addBoolean('requestQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('eventQueue');\nACCOUNT_FLAGS_LAYOUT.addBoolean('bids');\nACCOUNT_FLAGS_LAYOUT.addBoolean('asks');\nfunction accountFlagsLayout(property = 'accountFlags') {\n    return ACCOUNT_FLAGS_LAYOUT.replicate(property);\n}\nexports.accountFlagsLayout = accountFlagsLayout;\nfunction setLayoutDecoder(layout, decoder) {\n    const originalDecode = layout.decode;\n    layout.decode = function decode(b, offset = 0) {\n        return decoder(originalDecode.call(this, b, offset));\n    };\n}\nexports.setLayoutDecoder = setLayoutDecoder;\nfunction setLayoutEncoder(layout, encoder) {\n    const originalEncode = layout.encode;\n    layout.encode = function encode(src, b, offset) {\n        return originalEncode.call(this, encoder(src), b, offset);\n    };\n    return layout;\n}\nexports.setLayoutEncoder = setLayoutEncoder;\n//# sourceMappingURL=layout.js.map"]},"metadata":{},"sourceType":"script"}