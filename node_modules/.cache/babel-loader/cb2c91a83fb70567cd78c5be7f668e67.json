{"ast":null,"code":"import React,{useEffect,useMemo,useRef}from\"react\";import{useEnrichedPools}from\"./../../context/market\";import echarts from\"echarts\";import{formatUSD}from\"../../utils/utils\";export var SupplyOverview=function SupplyOverview(props){var pool=props.pool;var pools=useMemo(function(){return pool?[pool]:[];},[pool]);var enriched=useEnrichedPools(pools);var chartDiv=useRef(null);// dispose chart\nuseEffect(function(){var div=chartDiv.current;return function(){var instance=div&&echarts.getInstanceByDom(div);instance&&instance.dispose();};},[]);useEffect(function(){if(!chartDiv.current||enriched.length===0){return;}var instance=echarts.getInstanceByDom(chartDiv.current);if(!instance){instance=echarts.init(chartDiv.current);}var data=[{name:enriched[0].names[0],value:enriched[0].liquidityAinUsd},{name:enriched[0].names[1],value:enriched[0].liquidityBinUsd}];instance.setOption({tooltip:{trigger:\"item\",formatter:function formatter(params){var val=formatUSD.format(params.value);return\"\".concat(params.name,\": \\n\").concat(val);}},series:[{name:\"Liquidity\",type:\"pie\",top:0,bottom:0,left:0,right:0,label:{fontSize:14,show:true,formatter:function formatter(params){var val=formatUSD.format(params.value);return\"\".concat(params.name,\"\\n\").concat(val);},color:\"rgba(255, 255, 255, 0.5)\"},itemStyle:{normal:{borderColor:\"#000\"}},data:data}]});},[enriched]);if(enriched.length===0){return null;}return/*#__PURE__*/React.createElement(\"div\",{ref:chartDiv,style:{height:150,width:\"100%\"}});};","map":{"version":3,"sources":["/home/yclnl/yclnl.github.io/src/components/pool/supplyOverview.tsx"],"names":["React","useEffect","useMemo","useRef","useEnrichedPools","echarts","formatUSD","SupplyOverview","props","pool","pools","enriched","chartDiv","div","current","instance","getInstanceByDom","dispose","length","init","data","name","names","value","liquidityAinUsd","liquidityBinUsd","setOption","tooltip","trigger","formatter","params","val","format","series","type","top","bottom","left","right","label","fontSize","show","color","itemStyle","normal","borderColor","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef } from \"react\";\nimport { PoolInfo } from \"../../models\";\nimport { useEnrichedPools } from \"./../../context/market\";\nimport echarts from \"echarts\";\nimport { formatUSD } from \"../../utils/utils\";\n\nexport const SupplyOverview = (props: {\n  mintAddress: string[];\n  pool?: PoolInfo;\n}) => {\n  const { pool } = props;\n  const pools = useMemo(() => (pool ? [pool] : []), [pool]);\n  const enriched = useEnrichedPools(pools);\n  const chartDiv = useRef<HTMLDivElement>(null);\n\n  // dispose chart\n  useEffect(() => {\n    const div = chartDiv.current;\n    return () => {\n      let instance = div && echarts.getInstanceByDom(div);\n      instance && instance.dispose();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!chartDiv.current || enriched.length === 0) {\n      return;\n    }\n\n    let instance = echarts.getInstanceByDom(chartDiv.current);\n    if (!instance) {\n      instance = echarts.init(chartDiv.current as any);\n    }\n\n    const data = [\n      {\n        name: enriched[0].names[0],\n        value: enriched[0].liquidityAinUsd,\n      },\n      {\n        name: enriched[0].names[1],\n        value: enriched[0].liquidityBinUsd,\n      },\n    ];\n\n    instance.setOption({\n      tooltip: {\n        trigger: \"item\",\n        formatter: function (params: any) {\n          var val = formatUSD.format(params.value);\n          return `${params.name}: \\n${val}`;\n        },\n      },\n      series: [\n        {\n          name: \"Liquidity\",\n          type: \"pie\",\n          top: 0,\n          bottom: 0,\n          left: 0,\n          right: 0,\n          label: {\n            fontSize: 14,\n            show: true,\n            formatter: function (params: any) {\n              var val = formatUSD.format(params.value);\n              return `${params.name}\\n${val}`;\n            },\n            color: \"rgba(255, 255, 255, 0.5)\",\n          },\n          itemStyle: {\n            normal: {\n              borderColor: \"#000\",\n            },\n          },\n          data,\n        },\n      ],\n    });\n  }, [enriched]);\n\n  if (enriched.length === 0) {\n    return null;\n  }\n\n  return <div ref={chartDiv} style={{ height: 150, width: \"100%\" }} />;\n};\n"]},"metadata":{},"sourceType":"module"}